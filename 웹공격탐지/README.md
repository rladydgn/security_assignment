# 정보보호와 시스템보안 프로젝트 : 웹공격탐지
목적 : HTTP Request의 공격로그(비정상로그) 탐지

팀원 : 김용후(20181589) / 문예찬(20192230) / 안성열(20163121)

## 함수설명
* def parsing : 데이터셋의 로그 한 부위에서 HTTP주소와 바디(POST)만 가져오는 함수입니다. (+ 하단 추가 설명)

* def dataset : 데이터셋의 라벨을 지정하는 함수입니다. 

## 프로그램 구조

### 1. 데이터셋 파싱+라벨링 작업
* 4개 데이터셋의 웹로그를 파싱, 라벨링하여 웹 공격탐지에 사용될 수 있는 요소만 추출합니다.


### 2. 등장 빈도수가 1인 단어 제외
* 정상 데이터셋에서 추출한 단어 중 등장 빈도수가 1인 단어는 사용되지 않는 단어로 간주하여 삭제했습니다.
* 추후 모델 학습에 사용되는 벡터의 차원수를 줄임으로써 정확도와 속도를 빠르게 합니다. 


### 3. 학습 데이터 전처리 과정
* 모델 학습에 사용될 벡터의 길이를 모두 통일합니다. 최대 길이 벡터로 통일하기 위해 패딩을 붙입니다.


### 4. RNN 학습 과정
* 학습 모델은 RNN을 사용하였습니다. 반복 학습을 통해 정확도를 높은 수치로 올릴 수 있습니다.
* 임베딩 벡터의 차원 : 32 / RNN 셀의 hidden_size = 32 / batch_size = 64 / 반복횟수 : loop 설정


### 5. 결과 그래프 출력
* epochs : 반복횟수 / loss = 1 - 정확도
* 결과값이 x축에 가까울수록 정확도가 높음을 의미합니다.

## 추가설명 : 웹 공격탐지에 사용될 수 있는 요소
check_dataset.py 코드를 통해 데이터셋의 User-Agent, Pragma, Cache-control, Accept, Accept-Encoding, Accept-Charset, Accept-Language, Host, Connection, Content-Type의 값은 모두 같다는 사실을 알 수 있습니다. 

즉, HTTP주소, Cookie, Content-Length, body 값만 다릅니다. 여기서 Content-Length는 body의 길이와 동일하므로 제외합니다. 또한 Cookie의 값은 학습결과로 카테고리가 생성되지 않기 때문에 제외합니다.

결과적으로 HTTP주소와 body값이 악성로그를 판단하는 기준으로 삼고 두 값만 파싱했습니다.

## 결과 미리보기

![123](https://user-images.githubusercontent.com/24891555/140931275-1c766819-c5ce-46f4-91c3-1776a61c2ec7.PNG)
[정보보안프로젝트_최종.py 실행결과]

테스트셋 accuracy: 0.9908

테스트셋 precision: 0.9976

테스트셋 recall: 0.9801

테스트셋 f1_score : 0.9887

[정보보안프로젝트_최종.ipynb 실행결과]
